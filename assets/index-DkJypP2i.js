(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}})();class e{static isInitialized=!1;static width=256;static height=512;static scaleX=1;static scaleY=1;static offsetX=0;static cursor={x:-1,y:-1,isPressed:!1,isClicked:!1,isDoubleClicked:!1,lastTimeOfClick:0};static keysList={};static imageList=new Map;static canvasElement=document.querySelector("#app-canvas");static context=e.canvasElement.getContext("2d");constructor(){}static get getWidth(){return e.width}static get getHeight(){return e.height}static get getCursorX(){return e.cursor.x}static get getCursorY(){return e.cursor.y}static get getCursorIsPressed(){return e.cursor.isPressed}static get getCursorIsClicked(){return e.cursor.isClicked}static get getCursorIsDoubleClicked(){return e.cursor.isDoubleClicked}static get getCurrentColor(){return typeof e.context.fillStyle=="string"?e.context.fillStyle:"#000000"}static get getAlpha(){return e.context.globalAlpha}static set setCurrentColor(t){e.context.fillStyle=t}static set setAlpha(t){e.context.globalAlpha=Math.max(0,t)}static set setFontSize(t){e.context.font=`${t}px old-pixel`}static init(){e.isInitialized||(e.isInitialized=!0,e.updateCanvas(),window.addEventListener("resize",e.updateCanvas),e.canvasElement.addEventListener("wheel",t=>t.preventDefault()),e.canvasElement.addEventListener("click",e.handleMouseEvent),e.canvasElement.addEventListener("dblclick",e.handleMouseEvent),e.canvasElement.addEventListener("mousedown",e.handleMouseEvent),e.canvasElement.addEventListener("mousemove",e.handleMouseEvent),e.canvasElement.addEventListener("mouseup",e.handleMouseEvent),e.canvasElement.addEventListener("touchstart",e.handleTouchEvent),e.canvasElement.addEventListener("touchmove",e.handleTouchEvent),e.canvasElement.addEventListener("touchend",e.handleTouchEvent),window.addEventListener("keydown",e.handleKeyEvent),window.addEventListener("keyup",e.handleKeyEvent))}static getIsCursorIntersectWithArea(t,i,s,o){return e.cursor.x>=t&&e.cursor.x<=t+s&&e.cursor.y>=i&&e.cursor.y<=i+o}static updateCursor(){e.cursor.isClicked=!1,e.cursor.isDoubleClicked=!1}static getIsKeyPressed(t){return t==="space"?e.keysList[" "]:e.keysList[t.toLowerCase()]}static clear(){e.context.restore(),e.context.save(),e.context.scale(e.scaleX,e.scaleY),e.context.clearRect(0,0,e.width,e.height)}static fill(t,i,s,o){e.context.fillRect(t,i,s,o)}static print(t,i,s,o,r="left"){e.context.textAlign=r,e.setFontSize=o,e.context.fillText(t,i,s)}static getTextWidth(t,i){return e.setFontSize=i,Math.round(e.context.measureText(t).width)}static loadImage(t,i){return new Promise((s,o)=>{const r=new Image;r.src=i,r.addEventListener("load",()=>s(i)),r.addEventListener("error",()=>o(i)),e.imageList.set(t,r)})}static drawImage(t,i,s,o,r){try{e.context.drawImage(e.imageList.get(t),i,s,o,r)}catch{e.drawUnknownImage(i,s,o,r)}}static drawSprite(t,i,s,o,r,l,I,k,L){try{e.context.drawImage(e.imageList.get(t),i,s,o,r,l,I,k,L)}catch{e.drawUnknownImage(l,I,k,L)}}static drawUnknownImage(t,i,s,o){const r=e.getCurrentColor;e.setCurrentColor="#000000",e.fill(t,i,s/2,o/2),e.fill(t+s/2,i+o/2,s/2,o/2),e.setCurrentColor="#aa00aa",e.fill(t+s/2,i,s/2,o/2),e.fill(t,i+o/2,s/2,o/2),e.setCurrentColor=r}static updateCanvas(){e.canvasElement.width=Math.min(512,document.documentElement.clientWidth),e.canvasElement.height=document.documentElement.clientHeight,e.context.textBaseline="top",e.context.imageSmoothingEnabled=!1,e.scaleX=e.canvasElement.width/e.width,e.scaleY=e.canvasElement.height/e.height,e.offsetX=e.canvasElement.getBoundingClientRect().left}static handleMouseEvent(t){e.cursor.x=Math.trunc((t.pageX-e.offsetX)/e.scaleX),e.cursor.y=Math.trunc(t.pageY/e.scaleY),t.type==="click"&&(e.cursor.isClicked=!0),t.type==="dblclick"?e.cursor.isDoubleClicked=!0:t.type==="mousedown"?e.cursor.isPressed=!0:t.type==="mouseup"&&(e.cursor.isPressed=!1)}static handleTouchEvent(t){t.preventDefault(),t.type!=="touchend"&&(e.cursor.x=Math.trunc((t.touches[t.touches.length-1].pageX-e.offsetX)/e.scaleX),e.cursor.y=Math.trunc(t.touches[t.touches.length-1].pageY/e.scaleY)),t.type==="touchstart"?e.cursor.isPressed=!0:t.type==="touchend"&&(performance.now()-e.cursor.lastTimeOfClick<=500?(e.cursor.isDoubleClicked=!0,e.cursor.lastTimeOfClick=0):e.cursor.lastTimeOfClick=performance.now(),e.cursor.isClicked=!0,e.cursor.isPressed=t.touches.length>0)}static handleKeyEvent(t){t.ctrlKey||t.shiftKey||t.altKey||(e.keysList[t.key.toLowerCase()]=t.type==="keydown")}}const T="/images/game/",R={"giant-pizza":"giant-pizza.png",background:"backgrounds/background.png","background-without-sign":"backgrounds/background-without-sign.png","leaderboard-background":"backgrounds/leaderboard-background.png","leaderboard-locked-background":"backgrounds/leaderboard-locked-background.png","shop-background":"backgrounds/shop-background.png","leaderboard-button":"gui/buttons/leaderboard-button.png","settings-button":"gui/buttons/settings-button.png","shop-button":"gui/buttons/shop-button.png","home-button":"gui/buttons/home-button.png","pause-button":"gui/buttons/pause-button.png","continue-button":"gui/buttons/continue-button.png","language-button":"gui/buttons/language-button.png","exit-button":"gui/buttons/exit-button.png","exit-locked-button":"gui/buttons/exit-locked-button.png","enable-fullscreen-button":"gui/buttons/enable-fullscreen-button.png","disable-fullscreen-button":"gui/buttons/disable-fullscreen-button.png","telegram-button":"gui/buttons/telegram-button.png","youtube-button":"gui/buttons/youtube-button.png","about-button":"gui/buttons/about-button.png","github-button":"gui/buttons/github-button.png","left-button":"gui/buttons/left-button.png","right-button":"gui/buttons/right-button.png","controls-button":"gui/buttons/controls-button.png","enable-checkbox-button":"gui/buttons/enable-checkbox-button.png","disable-checkbox-button":"gui/buttons/disable-checkbox-button.png","news-button":"gui/buttons/news-button.png","britain-flag":"gui/flags/britain-flag.png","russia-flag":"gui/flags/russia-flag.png","half-screen-button":"gui/controls/half-screen-button.png","behind-finger-button":"gui/controls/behind-finger-button.png",heart:"gui/hearts/heart.png","gold-heart":"gui/hearts/gold-heart.png","dead-heart":"gui/hearts/dead-heart.png","ice-icon":"gui/icons/ice-icon.png","x2-icon":"gui/icons/x2-icon.png","x3-icon":"gui/icons/x3-icon.png","x4-icon":"gui/icons/x4-icon.png","x5-icon":"gui/icons/x5-icon.png","icon-line":"gui/icon-line.png",trophy:"gui/trophy.png",money:"gui/money.png","money-background":"gui/money-background.png","small-money-background":"gui/small-money-background.png","group-line":"gui/group-line.png","chosen-pizza":"gui/chosen-pizza.png","locked-pizza":"gui/locked-pizza.png",crystal:"gui/crystal.png",clocks:"gui/clocks.png","no-wifi":"gui/no-wifi.png",box:"player/box.png","ice-box":"player/ice-box.png","rotten-box":"player/rotten-box.png",cola:"loot/cola.png","rotten-pizza":"loot/rotten-pizza.png",ice:"loot/ice.png",x:"loot/x.png",totem:"loot/totem.png","big-money":"loot/big-money.png","pepperoni-pizza":"loot/pizzas/pepperoni-pizza.png","farmhouse-pizza":"loot/pizzas/farmhouse-pizza.png","margaret-pizza":"loot/pizzas/margaret-pizza.png","cheese-pizza":"loot/pizzas/cheese-pizza.png","spice-pizza":"loot/pizzas/spice-pizza.png","tuscany-pizza":"loot/pizzas/tuscany-pizza.png","carbonara-pizza":"loot/pizzas/carbonara-pizza.png","belarusian-pizza":"loot/pizzas/belarusian-pizza.png","hawaiian-pizza":"loot/pizzas/hawaiian-pizza.png","mexican-pizza":"loot/pizzas/mexican-pizza.png","pumpkin-pizza":"loot/pizzas/pumpkin-pizza.png","italian-pizza":"loot/pizzas/italian-pizza.png","gold-pizza":"loot/pizzas/gold-pizza.png","bavarian-pizza":"loot/pizzas/bavarian-pizza.png","chicken-pizza":"loot/pizzas/chicken-pizza.png","chocolate-pizza":"loot/pizzas/chocolate-pizza.png","pickle-pizza":"loot/pizzas/pickle-pizza.png","casino-pizza":"loot/pizzas/casino-pizza.png","diamond-pizza":"loot/crystal-pizzas/diamond-pizza.png","ruby-pizza":"loot/crystal-pizzas/ruby-pizza.png","emerald-pizza":"loot/crystal-pizzas/emerald-pizza.png","amethyst-pizza":"loot/crystal-pizzas/amethyst-pizza.png","jade-pizza":"loot/crystal-pizzas/jade-pizza.png","topaz-pizza":"loot/crystal-pizzas/topaz-pizza.png","amber-pizza":"loot/crystal-pizzas/amber-pizza.png","quartz-pizza":"loot/crystal-pizzas/quartz-pizza.png","obsidian-pizza":"loot/crystal-pizzas/obsidian-pizza.png","iron-pizza":"loot/oxidized-pizzas/iron-pizza-stage-0.png","iron-pizza-stage-0":"loot/oxidized-pizzas/iron-pizza-stage-0.png","iron-pizza-stage-1":"loot/oxidized-pizzas/iron-pizza-stage-1.png","iron-pizza-stage-2":"loot/oxidized-pizzas/iron-pizza-stage-2.png","iron-pizza-stage-3":"loot/oxidized-pizzas/iron-pizza-stage-3.png","copper-pizza":"loot/oxidized-pizzas/copper-pizza-stage-0.png","copper-pizza-stage-0":"loot/oxidized-pizzas/copper-pizza-stage-0.png","copper-pizza-stage-1":"loot/oxidized-pizzas/copper-pizza-stage-1.png","copper-pizza-stage-2":"loot/oxidized-pizzas/copper-pizza-stage-2.png","copper-pizza-stage-3":"loot/oxidized-pizzas/copper-pizza-stage-3.png","smell-animation":"animations/smell-animation.png","big-money-animation":"animations/big-money-animation.png"},B={root:T,list:R};class d{isWorking=!1;nextScene;constructor(){}get getIsWorking(){return this.isWorking}get getNextScene(){return this.nextScene??new M}run(){this.isWorking=!0}stop(t){this.isWorking=!1,this.nextScene=t}init(){}update(t){}draw(t){}}class M extends d{update(){e.getCursorIsClicked&&window.location.reload()}draw(){e.setCurrentColor="#000000",e.fill(0,0,e.getWidth,e.getHeight),e.setCurrentColor="#ffffff",e.print("Empty scene, click for reload app",e.getWidth/2,e.getHeight/2,40,"center")}}const A={english:"Click!",russian:"Кликни!"},N={english:"Pause",russian:"Пауза"},D={english:"Stickers",russian:"Стикеры"},Y={english:"Devblog",russian:"Девблог"},O={english:"Developer",russian:"Разработчик"},$={english:"Testers",russian:"Тестеры"},V={english:"Version",russian:"Версия"},P={click:A,"loading resources":{english:"Loading resources...",russian:"Загрузка ресурсов..."},"loading data":{english:"Loading data...",russian:"Загрузка данных..."},"data load error":{english:"Data load error",russian:"Ошибка загрузки данных"},"random mode":{english:"Random pizzas",russian:"Случайные пиццы"},pause:N,"change controls":{english:"Select the control type",russian:"Выберите тип управления"},"change language":{english:"Select a language",russian:"Выберите язык"},"exit from account":{english:"Are you sure you want to log out of your account?",russian:"Вы точно хотите выйти из аккаунта?"},stickers:D,devblog:Y,developer:O,testers:$,version:V},f=[{name:"pepperoni",title:{english:"Pepperoni",russian:"Пепперони"},description:{english:"Classic. Everyone knows her.",russian:"Классика. Каждый знает её."},cost:-1},{name:"farmhouse",title:{english:"Farmhouse",russian:"Фермерская"},description:{english:"Pizza for getting a taste of village life.",russian:"Пицца для получения вкуса деревенской жизни."},cost:50},{name:"margaret",title:{english:"Margaret",russian:"Маргарита"},description:{english:"Who doesn't know this pizza?",russian:"Кто не знает эту пиццу?"},cost:150},{name:"cheese",title:{english:"Cheese",russian:"Сырная"},description:{english:"Cheese lovers will like this pizza.",russian:"Любителям сыра придется по вкусу эта пицца."},cost:300},{name:"spice",title:{english:"Spice",russian:"Спайси"},description:{english:"Ahhh! Hot! Hot jalapeno pepper will surprise you.",russian:"Аааа! Горячо! Острый перец халапеньо удивит тебя."},cost:2e3},{name:"tuscany",title:{english:"Tuscany",russian:"Тоскана"},description:{english:"A taste from Florence. It will cover the Renaissance.",russian:"Вкус из Флоренции. Она накроет эпохой возрождения."},cost:700},{name:"carbonara",title:{english:"Carbonara",russian:"Карбонара"},description:{english:"Standard ingredients - delicious pizza.",russian:"Стандартные ингредиенты - вкусная пицца."},cost:300},{name:"belarusian",title:{english:"Belarusian",russian:"Белорусская"},description:{english:"The main ingredient of this pizza is potatoes.",russian:"Главным ингредиентом этой пиццы является картофель."},cost:800},{name:"hawaiian",title:{english:"Hawaiian",russian:"Гавайская"},description:{english:"There are pineapples there, it's terrible!",russian:"Там есть ананасы, ужасно!"},cost:300},{name:"diamond",title:{english:"Diamond",russian:"Алмаз"},description:{english:"Not a single tooth will bite through this pizza.",russian:"Ни один зуб не прокусит эту пиццу."},cost:-1,crystal:!0},{name:"ruby",title:{english:"Ruby",russian:"Рубин"},description:{english:"Is this pizza definitely not fake?",russian:"Эта пицца точно не подделка?"},cost:-1,crystal:!0},{name:"emerald",title:{english:"Emerald",russian:"Изумруд"},description:{english:"Hmm hmm... Hmm.",russian:"Хмм хм... Хммм."},cost:-1,crystal:!0},{name:"mexican",title:{english:"Mexican",russian:"Мексиканская"},description:{english:"Spicey has a worthy rival.",russian:"У Спайси появился достойный соперник."},cost:1200},{name:"pumpkin",title:{english:"Pumpkin",russian:"Тыквенная"},description:{english:"Yes! It's not pizza, but it's definitely not worse.",russian:"Да! Это не пицца, но точно не хуже."},cost:500},{name:"amethyst",title:{english:"Amethyst",russian:"Аметист"},description:{english:"Gutter...",russian:"Желоба..."},cost:-1,crystal:!0},{name:"jade",title:{english:"Jade",russian:"Нефрит"},description:{english:"Straight from the Chinese palaces.",russian:"Прямиком из китайских дворцов."},cost:-1,crystal:!0},{name:"topaz",title:{english:"Topaz",russian:"Топаз"},description:{english:"No! It\\'s not caramel.",russian:"Нет! Это не карамель."},cost:-1,crystal:!0},{name:"italian",title:{english:"Italian",russian:"Итальянская"},description:{english:"Real, Neapolitan pizza.",russian:"Настоящая, Неаполитанская пицца."},cost:1500},{name:"gold",title:{english:"Golden",russian:"Золотая"},description:{english:"Well, very expensive.",russian:"До-до-дорого пиздец."},cost:3e3},{name:"bavarian",title:{english:"Bavarian",russian:"Баварская"},description:{english:"ZHVP didn't come up with a description.",russian:"ЖВП не придумал описание."},cost:1500},{name:"amber",title:{english:"Amber",russian:"Янтарь"},description:{english:"It was once the resin of a tree.",russian:"Когда-то она была смолой дерева."},cost:-1,crystal:!0},{name:"chicken",title:{english:"Chicken Ranch",russian:"Чикен ранч"},description:{english:"6 pizzas and cola.",russian:"6 пицц и кола."},cost:900},{name:"chocolate",title:{english:"Chocolate",russian:"Шоколадная"},description:{english:"Chocolate and pizza? Unusual combination.",russian:"Шоколад и пицца? Необычное сочетание."},cost:500},{name:"pickle",title:{english:"Pickles",russian:"Пикли"},description:{english:"The creator\\'s dream.",russian:"Мечта создателя."},cost:300},{name:"quartz",title:{english:"Quartz",russian:"Кварц"},description:{english:"Turn the taste into a heavenly color!",russian:"Окрась вкус в небесный цвет!"},cost:-1,crystal:!0},{name:"obsidian",title:{english:"Obsidian",russian:"Обсидиан"},description:{english:"Can lose it at night.",russian:"Ночью можно потерять."},cost:-1,crystal:!0},{name:"casino",title:{english:"Chip",russian:"Фишка"},description:{english:"Warning! Highly addictive.",russian:"Внимание! Вызывает сильное привыкание."},cost:1e3},{name:"iron",title:{english:"Iron",russian:"Железная"},description:{english:"Guaranteed to increase the iron level in the body!",russian:"Гарантированно повысит уровень железа в организме!"},cost:2e3,oxidized:!0},{name:"copper",title:{english:"Copper",russian:"Медная"},description:{english:"Great for attracting lightning... maybe.",russian:"Отлично подходит для привлечения молнии... Возможно."},cost:2e3,oxidized:!0}];function K(n){return typeof n=="string"&&(n==="english"||n==="russian")}function S(n){return typeof n=="string"&&(n==="half-screen"||n==="behind-finger")}class u{static currentLanguage=K(localStorage.getItem("language"))?localStorage.getItem("language"):"english";constructor(){}static get getCurrentLanguage(){return u.currentLanguage}static set setCurrentLanguage(t){u.currentLanguage=t}static getText(t){return t in P?P[t][u.currentLanguage]??"":""}}class w{x;y;constructor(t=0,i=0){this.x=t,this.y=i}get getX(){return this.x}get getY(){return this.y}set(t,i){return this.x=t,this.y=i,this}add(t,i){return this.x+=t,this.y+=i,this}multiply(t){return this.x*=t,this.y*=t,this}clear(){return this.x=0,this.y=0,this}clone(){return new w(this.x,this.y)}}class C{x;y;width;height;velocity=new w;lastTime=0;constructor(t,i,s,o){this.x=t,this.y=i,this.width=s,this.height=o}get getX(){return this.x}get getY(){return this.y}get getWidth(){return this.width}get getHeight(){return this.height}get getVelocity(){return this.velocity}set setX(t){this.x=t}set setY(t){this.y=t}set setWidth(t){this.width=t}set setHeight(t){this.height=t}detectWithAnotherEntity(t){return this.x+this.width>=t.getX&&this.x<=t.getX+t.getWidth&&this.y+this.height>=t.getY&&this.y<=t.getY+t.getHeight}update(t){this.lastTime===0&&(this.lastTime=t),this.x+=this.velocity.getX*((t-this.lastTime)/1e3),this.y+=this.velocity.getY*((t-this.lastTime)/1e3),this.lastTime=t,this.velocity.clear()}draw(t){}}class y extends C{isEnable=!0;isVisible=!0;isIntersected=!1;constructor(t,i,s,o){super(t,i,s,o)}get getIsEnable(){return this.isEnable}get getIsVisible(){return this.isVisible}get getIsIntersected(){return this.isIntersected}get getIsPressed(){return this.isIntersected&&e.getCursorIsPressed}get getIsClicked(){return this.isIntersected&&e.getCursorIsClicked}get getIsDoubleClicked(){return this.isIntersected&&e.getCursorIsDoubleClicked}set setIsEnable(t){this.isEnable=t}set setIsVisible(t){this.isVisible=t}hide(){this.isEnable=!1,this.isVisible=!1}show(){this.isEnable=!0,this.isVisible=!0}update(t){this.isIntersected=this.isEnable&&e.getIsCursorIntersectWithArea(this.getX,this.getY,this.getWidth,this.getHeight)}}class h extends y{imageName;callback;constructor(t,i,s,o,r,l){super(s,o,r,l),this.imageName=t,this.callback=i}get getImageName(){return this.imageName}set setImageName(t){this.imageName=t}update(t){super.update(t),this.getIsEnable&&this.getIsClicked&&this.callback()}draw(t){this.getIsVisible&&e.drawImage(this.imageName,this.getX,this.getY,this.getWidth,this.getHeight)}}function z(n){return n>=1e3?`${Math.trunc(n/1e3)}.${n.toString()[n.toString().length-3]}k`:n.toFixed()}function W(n){const t=Number(localStorage.getItem(n));return Number.isFinite(t)?t:0}function U(n){return localStorage.getItem(n)==="true"}class a{static money=W("money");static highScore=W("high-score");static pizzasList=JSON.parse(localStorage.getItem("pizzas-list")??JSON.stringify({pepperoni:!0}));static controlsType=S(localStorage.getItem("controls-type"))?localStorage.getItem("controls-type"):"half-screen";static chosenPizza=localStorage.getItem("chosen-pizza")??"pepperoni";static isRandomModeEnabled=U("random-mode");constructor(){}static get getIsMoreThanTwoPizzas(){return Object.values(a.pizzasList).filter(t=>t).length>1}static get getMoney(){return a.money}static get getHighScore(){return a.highScore}static get getControlsType(){return a.controlsType}static get getChosenPizza(){return a.chosenPizza}static get getIsRandomModeEnabled(){return a.isRandomModeEnabled}static set setControlsType(t){a.controlsType=t,localStorage.setItem("controls-type",a.controlsType)}static addMoney(t){a.money+=t,localStorage.setItem("money",a.money.toString())}static updateHighScore(t){a.highScore<t&&(a.highScore=t,localStorage.setItem("high-score",a.highScore.toString()))}static choosePizza(t){a.hasPizza(t)&&(a.chosenPizza=t,localStorage.setItem("chosen-pizza",a.chosenPizza))}static toggleRandomMode(){a.isRandomModeEnabled=!a.isRandomModeEnabled,localStorage.setItem("random-mode",`${a.isRandomModeEnabled}`)}static buyPizza(t,i){a.money>=i&&(a.money-=i,a.pizzasList[t]=!0,localStorage.setItem("money",a.money.toString()),localStorage.setItem("pizzas-list",JSON.stringify(a.pizzasList)))}static hasPizza(t){return a.pizzasList[t]??!1}}class q extends h{pizzaName;pizzaCard;constructor(t,i,s,o,r){super(`${t}-pizza`,()=>s(this.pizzaCard),o,r,64,64),this.pizzaName=t,this.pizzaCard=i}get getPizzaName(){return this.pizzaName}get getPizzaCard(){return this.pizzaCard}update(t){super.update(t),!a.getIsRandomModeEnabled&&this.getIsEnable&&this.getIsDoubleClicked&&a.choosePizza(this.pizzaName)}draw(t){super.draw(t),!a.hasPizza(this.pizzaName)&&e.drawImage("locked-pizza",this.getX,this.getY,this.getWidth,this.getHeight),!a.getIsRandomModeEnabled&&a.getChosenPizza===this.pizzaName&&e.drawImage("chosen-pizza",this.getX,this.getY,this.getWidth,this.getHeight)}}class J extends y{linesList=[];text;fontSize;color;constructor(t,i,s,o,r,l){super(s,o,i,0),this.text=t,this.fontSize=r,this.color=l,this.create()}get getText(){return this.text}get getFontSize(){return this.fontSize}get getColor(){return this.color}set setText(t){this.text=t,this.create()}set setWidth(t){super.setWidth=t,this.create()}set setFontSize(t){this.fontSize=t}set setColor(t){this.color=t}draw(t){this.getIsVisible&&(e.setCurrentColor=this.color,this.linesList.forEach((i,s)=>e.print(i,this.getX,this.getY+s*this.fontSize*.7,this.fontSize)))}create(){let t="",i=[];this.text.split(" ").forEach(s=>{e.getTextWidth(t+s,this.fontSize)>=this.getWidth?(i=[...i,t],t=s+" "):t+=s+" "}),this.linesList=[...i,t]}}class j extends y{pizzaName;title;description;cost;isCrystal;isOxidized;buyButton=new h("",()=>a.buyPizza(this.pizzaName,this.cost),12,264,72,32);constructor(t,i,s,o,r=!1,l=!1){super(0,0,0,0),this.pizzaName=t,this.title=i,this.description=new J(s,e.getWidth/2+32,96,192,30,"#ffffff"),this.cost=o,this.isCrystal=r,this.isOxidized=l,this.isCrystal&&this.buyButton.hide()}get getPizzaName(){return this.pizzaName}get getTitle(){return this.title}get getDescription(){return this.description.getText}get getIsCrystal(){return this.isCrystal}get getIsOxidized(){return this.isOxidized}update(t){this.buyButton?.update(t)}draw(t){e.drawImage(`${this.pizzaName}-pizza`,16,192,64,64),this.isCrystal&&e.drawImage("crystal",76,175,16,16),this.isOxidized&&e.drawImage("clocks",78,175,16,16),e.setCurrentColor="#ffffff",e.print(this.title,96,160,40),this.description.draw(t),this.cost>=0&&!a.hasPizza(this.pizzaName)&&this.buyButton.getIsVisible&&(e.drawImage("small-money-background",12,264,72,32),e.drawImage("money",12,264,32,32),e.setCurrentColor="#ffffff",e.print(z(this.cost),40,263,32))}}class Q extends y{itemsList=[];rowsCount;currentRowIndex=0;currentRow=[];currentPizzaCard;constructor(t){super(0,0,0,0),this.itemsList=t.map((i,s)=>new q(i.name,new j(i.name,i.title[u.getCurrentLanguage],i.description[u.getCurrentLanguage],i.cost,i.crystal,i.oxidized),o=>this.currentPizzaCard=o,28+Math.floor(s%3)*64+Math.floor(s%3)*4,e.getHeight-160)),this.currentPizzaCard=this.itemsList[0].getPizzaCard,this.rowsCount=Math.floor((this.itemsList.length-1)/3),this.updateRow()}left(){this.currentRowIndex-1<0?this.currentRowIndex=this.rowsCount:this.currentRowIndex-=1,this.updateRow()}right(){this.currentRowIndex+1>this.rowsCount?this.currentRowIndex=0:this.currentRowIndex+=1,this.updateRow()}update(t){this.currentRow.forEach(i=>i?.update(t)),this.currentPizzaCard?.update(t)}draw(t){this.currentRow.forEach(i=>i?.draw(t)),this.currentPizzaCard?.draw(t)}updateRow(){this.currentRow=[this.itemsList[this.currentRowIndex*3],this.itemsList[this.currentRowIndex*3+1],this.itemsList[this.currentRowIndex*3+2]]}}class Z extends d{homeButton=new h("home-button",()=>this.stop(new p),e.getWidth-64-8,8,64,64);carousel=new Q(f);leftButton=new h("left-button",()=>this.carousel.left(),0,e.getHeight-160,24,64);rightButton=new h("right-button",()=>this.carousel.right(),e.getWidth-24,e.getHeight-160,24,64);randomModeCheckbox=new h("disable-checkbox-button",()=>a.toggleRandomMode(),8,e.getHeight-40,32,32);init(){!a.getIsMoreThanTwoPizzas&&this.randomModeCheckbox.hide()}update(t){this.homeButton.update(t),this.randomModeCheckbox.update(t),this.leftButton.update(t),this.rightButton.update(t),this.carousel.update(t)}draw(t){e.drawImage("shop-background",0,0,e.getWidth,e.getHeight),this.carousel.draw(t),this.leftButton.draw(t),this.rightButton.draw(t),e.drawImage("money-background",8,8,88,32),e.drawImage("money",8,8,32,32),e.setCurrentColor="#ffffff",e.print(a.getMoney.toString(),36,7,32),this.randomModeCheckbox.setImageName=`${a.getIsRandomModeEnabled?"enable":"disable"}-checkbox-button`,this.randomModeCheckbox.draw(t),e.setCurrentColor="#ffffff",this.randomModeCheckbox.getIsVisible&&e.print(u.getText("random mode"),this.randomModeCheckbox.getX+34,this.randomModeCheckbox.getY+4,24),this.homeButton.draw(t)}}class G extends d{englishButton=new h("britain-flag",()=>this.changeLanguage("english"),e.getWidth/2+4,e.getHeight/2-32,64,64);russianButton=new h("russia-flag",()=>this.changeLanguage("russian"),this.englishButton.getX-64-8,this.englishButton.getY,64,64);changeText=u.getText("change language");init(){}update(t){this.englishButton.update(t),this.russianButton.update(t)}draw(t){e.drawImage("background-without-sign",0,0,e.getWidth,e.getHeight),this.englishButton.draw(t),this.russianButton.draw(t),e.setCurrentColor="#ffffff",e.print(this.changeText,e.getWidth/2,e.getHeight/2-72,32,"center")}changeLanguage(t){u.setCurrentLanguage=t,localStorage.setItem("language",u.getCurrentLanguage),this.stop(new p)}}class _ extends d{halfScreenButton=new h("half-screen-button",()=>this.changeControls("half-screen"),16,152,92,164);behindFingerButton=new h("behind-finger-button",()=>this.changeControls("behind-finger"),e.getWidth-16-92,152,92,164);init(){}update(t){this.halfScreenButton.update(t),this.behindFingerButton.update(t)}draw(t){e.drawImage("background-without-sign",0,0,e.getWidth,e.getHeight),this.halfScreenButton.draw(t),this.behindFingerButton.draw(t),e.setCurrentColor="#ffffff",e.print(u.getText("change controls"),e.getWidth/2,100,32,"center")}changeControls(t){a.setControlsType=t,this.stop(new p)}}const tt="/pizza-game-client",et=f.map(({name:n})=>n);f.filter(({crystal:n})=>!n).map(({name:n})=>n);const E=f.filter(({crystal:n})=>n).map(({name:n})=>n),it=f.filter(({oxidized:n})=>n).map(({name:n})=>n),m={telegram:"https://t.me/onegaf",github:"https://github.com/onegafchik",stickersTelegram:"https://t.me/addstickers/pizzagame",devblog:"https://nektarin.itch.io/pizza-game/devlog"};class st extends d{githubButton=new h("github-button",()=>window.open(m.github),e.getWidth/2-64-4,70,64,64);telegramButton=new h("telegram-button",()=>window.open(m.telegram),e.getWidth/2+4,70,64,64);homeButton=new h("home-button",()=>this.stop(new X),e.getWidth/2-32,e.getHeight-160,64,64);testersPositionY=160;init(){}update(t){this.githubButton.update(t),this.telegramButton.update(t),this.homeButton.update(t)}draw(t){e.drawImage("background-without-sign",0,0,e.getWidth,e.getHeight),e.setCurrentColor="#ffffff",e.print(u.getText("developer"),e.getWidth/2,8,32,"center"),e.print("NEkTARIN (raro4ka)",e.getWidth/2,36,24,"center"),this.githubButton.draw(t),this.telegramButton.draw(t),e.print(u.getText("testers"),e.getWidth/2,160,32,"center"),e.drawImage("group-line",24,this.testersPositionY-16,208,12),e.print("F1stashka",e.getWidth/3,this.testersPositionY+30,24,"center"),e.print("SATANik",e.getWidth/3,this.testersPositionY+50,24,"center"),e.print("Tima",e.getWidth/3,this.testersPositionY+70,24,"center"),e.print("fomousey",e.getWidth/3*2,this.testersPositionY+30,24,"center"),e.print("danik",e.getWidth/3*2,this.testersPositionY+50,24,"center"),e.print("Tim4ek78",e.getWidth/3*2,this.testersPositionY+70,24,"center"),this.homeButton.draw(t)}}class X extends d{buttonGroupPosition=new w(e.getWidth/2-32,e.getHeight/2-120);changeLanguageButton=new h("language-button",()=>this.stop(new G),this.buttonGroupPosition.getX-72,this.buttonGroupPosition.getY,64,64);homeButton=new h("home-button",()=>this.stop(new p),this.buttonGroupPosition.getX,this.buttonGroupPosition.getY,64,64);toggleFullscreenButton=new h("enable-fullscreen-button",()=>this.toggleFullscreen(),this.buttonGroupPosition.getX+72,this.buttonGroupPosition.getY,64,64);changeControlsButton=new h("controls-button",()=>this.stop(new _),this.buttonGroupPosition.getX-72,this.buttonGroupPosition.getY+72,64,64);aboutButton=new h("about-button",()=>this.stop(new st),this.buttonGroupPosition.getX,this.buttonGroupPosition.getY+72,64,64);exitFromAccountButton=new h("exit-locked-button",()=>this.exitFromAccount(),this.buttonGroupPosition.getX+72,this.buttonGroupPosition.getY+72,64,64);linkButtonGroupPosition=this.buttonGroupPosition.clone().add(0,164);telegramButton=new h("telegram-button",()=>window.open(m.stickersTelegram),this.linkButtonGroupPosition.getX-36,this.linkButtonGroupPosition.getY,64,64);newsButton=new h("news-button",()=>window.open(m.devblog),this.linkButtonGroupPosition.getX+36,this.linkButtonGroupPosition.getY,64,64);init(){}update(t){this.changeLanguageButton.update(t),this.homeButton.update(t),this.toggleFullscreenButton.update(t),this.changeControlsButton.update(t),this.aboutButton.update(t),this.exitFromAccountButton.update(t),this.telegramButton.update(t),this.newsButton.update(t)}draw(t){e.drawImage("background-without-sign",0,0,e.getWidth,e.getHeight),this.changeLanguageButton.draw(t),this.homeButton.draw(t),this.toggleFullscreenButton.setImageName=`${document.fullscreenElement?"disable":"enable"}-fullscreen-button`,this.toggleFullscreenButton.draw(t),this.changeControlsButton.draw(t),this.aboutButton.draw(t),this.exitFromAccountButton.draw(t),e.drawImage("group-line",this.changeControlsButton.getX,this.changeControlsButton.getY+64+8,208,12),this.telegramButton.draw(t),this.newsButton.draw(t),e.setCurrentColor="#ffffff",e.print(u.getText("stickers"),this.telegramButton.getX+this.telegramButton.getWidth/2,this.telegramButton.getY+this.telegramButton.getHeight-4,24,"center"),e.print(u.getText("devblog"),this.newsButton.getX+this.newsButton.getWidth/2,this.newsButton.getY+this.newsButton.getHeight-4,24,"center"),e.print(`${u.getText("version")} ${g.getVersion}`,4,e.getHeight-20,16)}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}exitFromAccount(){}}class nt extends d{homeButton=new h("home-button",()=>this.stop(new p),e.getWidth/2-32,e.getHeight-160,64,64);init(){}update(t){this.homeButton.update(t)}draw(t){e.drawImage("background-without-sign",0,0,e.getWidth,e.getHeight),e.drawImage("leaderboard-locked-background",20,24,216,320),this.homeButton.draw(t)}}function x(n,t){return Math.floor(Math.random()*(t-n+1)+n)}function v(n){return Array.from(new Array(n).keys())}class c{isWorking=!1;lastTime=0;deltaTime=0;duration;callback;isLooped;constructor(t,i,s=!1){this.duration=t,this.callback=i,this.isLooped=s}get getIsWorking(){return this.isWorking}get getLastTime(){return this.lastTime}get getDeltaTime(){return this.deltaTime}get getDuration(){return this.duration}get getIsLooped(){return this.isLooped}set setDuration(t){this.duration=Math.max(0,t)}set setIsLooped(t){this.isLooped=t}run(){this.isWorking=!0,this.lastTime=0}stop(){this.isWorking=!1}update(t){this.isWorking&&(this.lastTime===0&&(this.lastTime=t),this.deltaTime=t-this.lastTime,this.deltaTime>=this.duration&&(this.isLooped?this.run():this.stop(),this.callback()))}}class ot extends C{health=3;isFrozen=!1;isHasShield=!1;isHasX=!1;xLevel=2;maxXLevel=5;isRotten=!1;rottenTimer=new c(3e3,()=>this.isRotten=!1);freezeTimer=new c(4e3,()=>this.melt());xTimer=new c(16e3,()=>this.disableX(),!0);defaultSpeed=400;speed=this.defaultSpeed;iconsHash=new Map([["x",this.xTimer],["ice",this.freezeTimer]]);constructor(t,i){super(t,i,64,16)}get getHealth(){return this.health}get getIsFrozen(){return this.isFrozen}get getIsHasShield(){return this.isHasShield}get getIsHasX(){return this.isHasX}get getXLevel(){return this.xLevel}get getIsRotten(){return this.isRotten}set setHealth(t){this.health=Math.max(0,t)}set setIsShield(t){this.isHasShield=t}freeze(){this.isFrozen=!0,this.speed=this.defaultSpeed/3,this.freezeTimer.run()}melt(){this.isFrozen=!1,this.speed=this.defaultSpeed,this.freezeTimer.stop()}enableX(){this.isHasX?this.xLevel=Math.min(this.maxXLevel,this.xLevel+1):(this.isHasX=!0,this.xLevel=2),this.xTimer.run()}disableX(){this.xLevel-=1,this.xLevel<2&&(this.isHasX=!1,this.xTimer.stop())}hit(){if(!this.isRotten){if(this.isHasShield){this.isHasShield=!1;return}this.health=Math.max(0,this.health-1),this.isRotten=!0,this.rottenTimer.run()}}update(t){super.update(t),this.rottenTimer.update(t),this.freezeTimer.update(t),this.xTimer.update(t),(e.getIsKeyPressed("arrowleft")||a.getControlsType==="half-screen"&&e.getCursorIsPressed&&e.getIsCursorIntersectWithArea(0,32,e.getWidth/2,e.getHeight-32)||a.getControlsType==="behind-finger"&&e.getCursorIsPressed&&e.getIsCursorIntersectWithArea(0,32,this.getX+this.getWidth/2-4,e.getHeight-32))&&this.getVelocity.add(-this.speed,0),(e.getIsKeyPressed("arrowright")||a.getControlsType==="half-screen"&&e.getCursorIsPressed&&e.getIsCursorIntersectWithArea(e.getWidth/2,32,e.getWidth/2,e.getHeight-32)||a.getControlsType==="behind-finger"&&e.getCursorIsPressed&&e.getIsCursorIntersectWithArea(this.getX+this.getWidth/2+4,32,e.getWidth,e.getHeight-32))&&this.getVelocity.add(this.speed,0),this.getX<=4&&(this.setX=4),this.getX+this.getWidth>=e.getWidth-4&&(this.setX=e.getWidth-this.getWidth-4)}draw(t){this.isRotten?e.drawImage("rotten-box",this.getX-4,this.getY-48,72,72):e.drawImage(this.isFrozen?"ice-box":"box",this.getX-4,this.getY-48,72,72)}drawHUD(t){v(3).forEach(i=>e.drawImage("dead-heart",i*24,0,32,32)),v(this.health).forEach(i=>e.drawImage(this.isHasShield?"gold-heart":"heart",i*24,0,32,32)),Array.from(this.iconsHash).filter(([i,s])=>s.getIsWorking).forEach(([i,s],o)=>{const r=Math.min(1,1-s.getDeltaTime/s.getDuration);e.drawImage(`${i}${i==="x"?this.xLevel.toString():""}-icon`,0,96+o*48+o*4,56,48),e.drawSprite("icon-line",0,0,r*13,1,0,136+o*48+o*4,r*52,4)})}}class F extends C{type;constructor(t,i,s){super(i,s,64,64),this.type=t}get getType(){return this.type}update(t){super.update(t),this.getVelocity.set(0,300)}draw(t){e.drawImage(this.type,this.getX,this.getY,this.getWidth,this.getHeight)}}class b extends F{name;isOxidized;constructor(t,i,s,o=!1){super(o?"crystal-pizza":"pizza",i,s),this.name=t,this.isOxidized=new Set(it).has(t)}get getName(){return this.name}get getIsOxidized(){return this.isOxidized}draw(t,i=0){e.drawImage(`${this.name}-pizza${this.isOxidized?`-stage-${i}`:""}`,this.getX,this.getY,this.getWidth,this.getHeight)}}class at{minDuration;deltaDuration;timer;lootList=[];constructor(t,i,s){this.minDuration=i,this.deltaDuration=s,this.timer=new c(t,()=>this.spawn(),!0)}get getLootList(){return this.lootList}run(){this.timer.run()}stop(){this.timer.stop()}addLoot(t){this.lootList=[...this.lootList,t]}removeLoot(t){this.lootList=this.lootList.filter(i=>i!==t)}clearLootList(){this.lootList=[]}update(t){this.timer.update(t)}spawn(){this.timer.getDuration>this.minDuration&&(this.timer.setDuration=this.timer.getDuration-this.deltaDuration);const t=this.getRandomLootType(),i=x(0,192);t==="pizza"?this.lootList=[...this.lootList,new b(a.getIsRandomModeEnabled?this.getPizzaName(et,!1):a.getChosenPizza,i,-64)]:t==="crystal-pizza"?this.lootList=[...this.lootList,new b(this.getPizzaName(E,!0),i,-64,!0)]:this.lootList=[...this.lootList,new F(t,i,-64)]}getRandomLootType(){const t=x(1,1e3);switch(!0){case t<=700:return"pizza";case(t>700&&t<=900):return"rotten-pizza";case(t>900&&t<=960):return"ice";case(t>960&&t<=980):return"x";case(t>980&&t<=990):return"big-money";case(t>990&&t<=999):return"totem";case t==1e3:return E.every(i=>a.hasPizza(i))?"totem":"crystal-pizza";default:return"pizza"}}getPizzaName(t,i){let s=[],o="pepperoni";return t.forEach(r=>{a.hasPizza(r)?!i&&(s=[...s,r]):i&&(s=[...s,r])}),s.length>0&&(o=s[x(0,s.length-1)]),o}}class H{timer;framesList;currentFrame=0;constructor(t,i){this.framesList=i,this.timer=new c(t,()=>this.nextFrame(),!0)}get getIsWorking(){return this.timer.getIsWorking}get getDuration(){return this.timer.getDuration}get getFramesCount(){return this.framesList.length}get getCurrentFrame(){return this.framesList[this.currentFrame]??0}set setDuration(t){this.timer.setDuration=t}run(){this.timer.run()}stop(){this.timer.stop()}reset(){this.currentFrame=0}update(t){this.timer.update(t)}nextFrame(){this.currentFrame>=this.framesList.length-1?this.currentFrame=0:this.currentFrame+=1}}class rt extends d{isPause=!1;bufferTime=0;lastTime=0;player=new ot(0,e.getHeight-92);lootGenerator=new at(2e3,400,40);score=0;scoreTimer=new c(10,()=>this.score+=1,!0);oxidizedStage=0;maxOxidizedStage=3;oxidizedTimer=new c(1e5,()=>this.oxidizedStage=Math.min(this.oxidizedStage+1,this.maxOxidizedStage),!0);smellAnimation=new H(150,[0,1,2,3]);bigMoneyAnimation=new H(100,[0,1,2,3,4,5,6,7]);pauseButton=new h("pause-button",()=>this.pause(),e.getWidth-32,0,32,32);continueButton=new h("continue-button",()=>this.unpause(),e.getWidth/2-64-8,e.getHeight/2-32,64,64);homeButton=new h("home-button",()=>this.exit(),e.getWidth/2+8,e.getHeight/2-32,64,64);init(){this.player.setX=e.getWidth/2-this.player.getWidth/2,this.continueButton.hide(),this.homeButton.hide(),this.lootGenerator.run(),this.scoreTimer.run(),this.oxidizedTimer.run(),this.smellAnimation.run(),this.bigMoneyAnimation.run()}update(t){this.pauseButton.update(t),this.continueButton.update(t),this.homeButton.update(t),this.isPause?(this.lastTime===0&&(this.lastTime=t),this.bufferTime+=t-this.lastTime,this.lastTime=t):(e.getIsKeyPressed("space")&&this.pause(),this.scoreTimer.update(t-this.bufferTime),this.oxidizedTimer.update(t-this.bufferTime),this.lootGenerator.update(t-this.bufferTime),this.lootGenerator.getLootList.forEach(i=>{if(i.update(t-this.bufferTime),this.player.detectWithAnotherEntity(i)){switch(i.getType){case"pizza":{this.player.getIsHasX?a.addMoney(this.player.getXLevel):a.addMoney(1);break}case"rotten-pizza":{this.player.getIsFrozen&&this.player.melt(),this.player.hit();break}case"ice":{!this.player.getIsRotten&&this.player.freeze();break}case"x":{this.player.enableX();break}case"big-money":{a.addMoney(100);break}case"totem":{this.player.getIsHasShield&&a.addMoney(30),this.player.setIsShield=!0;break}case"crystal-pizza":{if(!(i instanceof b))return;a.addMoney(100),a.buyPizza(i.getName,0);break}}this.lootGenerator.removeLoot(i)}else i.getY>=e.getHeight&&this.lootGenerator.removeLoot(i)}),this.player.update(t-this.bufferTime),this.player.getHealth<=0&&this.exit())}draw(t){this.smellAnimation.update(t),this.bigMoneyAnimation.update(t),e.drawImage("background",0,0,e.getWidth,e.getHeight),this.player.draw(t),this.player.getIsRotten&&e.drawSprite("smell-animation",this.smellAnimation.getCurrentFrame*16,0,16,32,this.player.getX+4,this.player.getY-64,64,128),this.lootGenerator.getLootList.forEach(i=>{i instanceof b?i.draw(t,this.oxidizedStage):i.draw(t),i.getType==="rotten-pizza"&&e.drawSprite("smell-animation",this.smellAnimation.getCurrentFrame*16,0,16,32,i.getX,i.getY-48,64,128),i.getType==="big-money"&&e.drawSprite("big-money-animation",this.bigMoneyAnimation.getCurrentFrame*16,0,16,16,i.getX,i.getY,64,64)}),this.player.drawHUD(t),e.drawImage("trophy",0,24,32,32),e.setCurrentColor="#ffffff",e.print(a.getHighScore>this.score?`${z(a.getHighScore)} / ${z(this.score)}`:z(this.score),32,24,32),e.drawImage("money",0,48,32,32),e.setCurrentColor="#ffffff",e.print(a.getMoney.toString(),32,48,32),this.isPause&&(e.setCurrentColor="#ffffff",e.print(u.getText("pause"),e.getWidth/2,e.getHeight/2-80,40,"center")),this.pauseButton.draw(t),this.continueButton.draw(t),this.homeButton.draw(t)}pause(){this.isPause=!0,this.pauseButton.hide(),this.continueButton.show(),this.homeButton.show()}unpause(){this.isPause=!1,this.lastTime=0,this.pauseButton.show(),this.continueButton.hide(),this.homeButton.hide()}exit(){this.score>a.getHighScore&&a.updateHighScore(this.score),this.stop(new p)}}class p extends d{shopButton=new h("shop-button",()=>this.stop(new Z),8,e.getHeight-160,64,64);settingsButton=new h("settings-button",()=>this.stop(new X),e.getWidth-32,0,32,32);leaderboardButton=new h("leaderboard-button",()=>this.stop(new nt),e.getWidth-64,0,32,32);startLevelClickableArea=new h("",()=>this.getNextScene instanceof M&&this.stop(new rt),0,0,e.getWidth,e.getHeight);init(){e.getCursorIsPressed&&(this.startLevelClickableArea.setIsEnable=!1)}update(t){this.shopButton.update(t),this.settingsButton.update(t),this.leaderboardButton.update(t),this.startLevelClickableArea.update(t),!this.startLevelClickableArea.getIsEnable&&!e.getCursorIsPressed&&(this.startLevelClickableArea.setIsEnable=!0)}draw(t){e.drawImage("background",0,0,e.getWidth,e.getHeight),e.setCurrentColor="#ffffff",e.drawImage("trophy",0,0,32,32),e.print(z(a.getHighScore),32,0,32),e.drawImage("money",0,24,32,32),e.print(a.getMoney.toString(),32,24,32),this.shopButton.draw(t),this.settingsButton.draw(t),this.leaderboardButton.draw(t),e.setCurrentColor="#ffffff",e.print(u.getText("click"),e.getWidth/2,e.getHeight/2-56,40,"center")}}class ht extends d{isShowImageListDataInConsole=!1;isImageListLoaded=!1;init(){this.loadImageList()}update(t){this.isImageListLoaded&&this.stop(new p)}draw(t){e.setCurrentColor="#000000",e.fill(0,0,e.getWidth,e.getHeight),e.setCurrentColor="#ffffff",!this.isImageListLoaded&&e.print(u.getText("loading resources"),e.getWidth/2,e.getHeight/2-20,30,"center")}loadImageList(){const t=[];for(const[i,s]of Object.entries(B.list))t.push(e.loadImage(i,`${tt}${B.root}${s}`));Promise.allSettled(t).then(i=>{this.isShowImageListDataInConsole&&(console.groupCollapsed("IMAGE LIST"),i.forEach(s=>s.status==="fulfilled"?console.log(`${s.value} - OK`):console.error(`${s.reason} - ERROR`)),console.groupEnd())}).finally(()=>this.isImageListLoaded=!0)}}class g{static version="1.8.2";static loopID;static framesCount=0;static framesPerSecond=0;static isShowFrameDataInConsole=!1;static timerForUpdateFrameData=new c(1e3,()=>g.updateFrameData(),!0);static currentScene=new ht;constructor(){}static get getVersion(){return g.version}static run(){e.init(),g.loopID=window.requestAnimationFrame(t=>g.frame(t)),g.timerForUpdateFrameData.run(),g.currentScene.init(),g.currentScene.run()}static stop(){g.loopID&&window.cancelAnimationFrame(g.loopID)}static frame(t){g.loopID=window.requestAnimationFrame(i=>g.frame(i)),g.framesCount+=1,g.currentScene.getIsWorking||(g.currentScene=g.currentScene.getNextScene,g.currentScene.init(),g.currentScene.run()),g.currentScene.update(t),g.timerForUpdateFrameData.update(t),e.clear(),g.currentScene.draw(t),e.updateCursor()}static updateFrameData(){g.framesPerSecond=g.framesCount,g.framesCount=0}}window.addEventListener("load",g.run);
